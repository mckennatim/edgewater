(()=>{var e,t,n,r,o,s={279:(e,t,n)=>{"use strict";var r=n(41),o=n(873),s=n(606),i=n(322),a={};a.Help=r.lazy((function(){return n.e(3).then(n.bind(n,3))})),a.Jobs=r.lazy((function(){return Promise.all([n.e(508),n.e(964)]).then(n.bind(n,964))})),a.AddJob=r.lazy((function(){return n.e(902).then(n.bind(n,902))})),a.Control=r.lazy((function(){return Promise.all([n.e(508),n.e(717),n.e(869)]).then(n.bind(n,869))}));var c={default:"control",jobs:[["Jobs"],["Jobs","Help"],["Jobs","AddJob","Help"]],addjob:[["AddJob"],["AddJob","Jobs"],["AddJob","Jobs","Help"]],help:[["Help"],["Help","Control"]],control:[["Control"],["Control","Help"]]},l={container:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",backgroundColor:"#ece6ed"}};function u(){var e=(0,r.useContext)(i.hP),t=e.devInfo,n=e.path,o=e.visiblePages,s=e.setVisiblePages,u=t.panes;(0,r.useEffect)((function(){var e=n.substr(1);c[e]||(e=c.default);var t=[];!function e(n,r){var o=n.filter((function(e){return e.length==r}));if(o.length>0)return t=o,o;e(n,r-1)}(c[e],u),s(t[0])}),[u,n]);var f=o.map((function(e,t){return r.createElement(a[e],{key:t},null)}));return r.createElement("div",{style:l.container},f)}var f=function(e){e.title;var t=e.appid,n=e.dev1,o=(0,r.useContext)(i.hP),s=o.devInfo,a=(o.path,o.handlePath);return s.panes,r.createElement("div",null,r.createElement("nav",{style:h.nav.nav},r.createElement("span",{style:{fontFamily:"Arial, sans-serif",fontSize:"1.2em",fontWeight:"bold",padding:"10px",backgroundColor:"whitesmoke",borderRadius:"5px",marginBottom:"10px"}}," ",t," ",n),r.createElement("ul",{style:h.nav.ul},r.createElement("li",{style:h.nav.li},r.createElement("a",{onClick:a("/help")},"help")),r.createElement("li",{style:h.nav.li},r.createElement("a",{onClick:a("/control")},"control")))),r.createElement(u,null))},h={nav:{ul:{fontFamily:"Arial, sans-serif",textAlign:"left",listStyleType:"none",paddingLeft:"12px"},li:{display:"inline",padding:"2px",paddingRight:"4px",background:"whitesmoke"}}},d=n(434),p=n(664);console.log(d.jh);var g=function(e){var t=e.title;return r.createElement(s.nO,{cfg:d.jh},r.createElement(i.BO,null,r.createElement(r.Suspense,{fallback:r.createElement("div",null,"Loading...")},r.createElement("div",null,r.createElement(f,{title:t,appid:p.Hd,dev1:p.TK})))))},y=document.getElementById("app");(0,o.H)(y).render(r.createElement(g,{title:"WS MQTT Client"}))},322:(e,t,n)=>{"use strict";n.d(t,{BO:()=>p,hP:()=>h});var r=n(41);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,s,i,a=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,n(18).TM)(),f={job2edit:"",foundJobs:[],dev:{},path:""},h=(0,r.createContext)(f),d=function(e,t){switch(t.type){case"sETjOB2eDIT":return c(c({},e),{},{job2edit:t.payload});case"sETfOUNDjOBS":return c(c({},e),{},{foundJobs:t.payload})}},p=function(e){var t=e.children,n=s((0,r.useReducer)(d,f),2),o=n[0],i=n[1],a=s((0,r.useState)(b()),2),c=a[0],l=a[1],p=s((0,r.useState)([]),2),g=p[0],y=p[1],v=s((0,r.useState)(window.location.hash.substr(1)),2),m=v[0],_=v[1];function b(){var e,t=window.innerWidth;return[300,500,600,800,900,1800,3e3].reduce((function(n,r,o){return n<t&&t<=r&&(e=o),r}),0),[{dev:"watch",panes:1},{dev:"phone",panes:1},{dev:"phonel",panes:2},{dev:"tablet",panes:2},{dev:"tabletL",panes:3},{dev:"laptop",panes:3},{dev:"monitor",panes:4}][e]}return window.onresize=function(){b().panes!=c.panes&&l(b())},window.onhashchange=function(){_(window.location.hash.substr(1))},r.createElement(h.Provider,{value:{devInfo:c,path:m,handlePath:function(e){return function(){u.push(e),_(e)}},visiblePages:g,setVisiblePages:y,foundJobs:o.foundJobs,job2edit:o.job2edit,setFoundJobs:function(e){i({type:"sETfOUNDjOBS",payload:e})},setJob2edit:function(e){i({type:"sETjOB2eDIT",payload:e})}}},t)}},434:(e,t,n)=>{"use strict";n.d(t,{jh:()=>p,ls:()=>g,q5:()=>y});const r=JSON.parse('{"superapp":"iot","appid":"demo2","cbPath":"#locs","mqtt_server":"services.sitebuilt.net/iotb/wss","mqtt_port":4333,"sitebuilt.net":{"soauth":"https://services.sitebuilt.net/soauth","api":"https://services.sitebuilt.net/iotex/api"},"parleyvale.com":{"soauth":"https://services.sitebuilt.net/soauth","api":"https://services.sitebuilt.net/iotex/api"},"localhost":{"soauth":"http://localhost:7080","api":"https://services.sitebuilt.net/iotex/api"}}');var o,s=n(664),i=function(e){var t=r[e],n=window.location.hostname;return 4==n.split(".").length&&Object.keys(t).map((function(e){var r=t[e].replace("localhost",n);t[e]=r})),t}(3==(o=window.location.hostname.split(".")).length?"".concat(o[1],".").concat(o[2]):(o.length,"localhost"));console.log("urls: ",i);var a,c,l,u,f=i.soauth+"/spa/"+r.appid+"?apiURL="+encodeURIComponent(i.api)+"&cbPath="+encodeURIComponent(i.cbPath),h=i.soauth+"/spa/signup?apiURL="+encodeURIComponent(i.api)+"&cbPath="+encodeURIComponent(i.cbPath),d=i,p={authqry:f,appid:s.Hd,mqtt_server:r.mqtt_server,mqtt_port:r.mqtt_port,signupqry:h,url:d,urls:i,cbPath:i.cbPath},g=(a=p.appid,c=localStorage.getItem(a),{removeItem:function(){localStorage.removeItem(a)},itemName:a,itemStr:c,getItem:l=function(){return localStorage.getItem(a)?JSON.parse(localStorage.getItem(a)):null},setItem:u=function(e){localStorage.setItem(a,JSON.stringify(e))},modItem:function(e,t){var n=l();n&&(n[e]=t,u(n))},getToken:function(){return l()?l().token:null},getKey:function(e){return l()?l()[e]:null}}),y=function(e,t,n){var r;return console.log("host: ",e),r="iot.sitebuilt.net"==e||"iot.parleyvale.com"==e||"hvac.parleyvale.com"==e||"apps.sitebuilt.net"==e?"../".concat(t,"/"):"/hooks2/iot/".concat(t,"/dist/"),n&&(r+=n),r}},606:(e,t,n)=>{"use strict";n.d(t,{nO:()=>O,ob:()=>o,Ng:()=>b,lC:()=>E,Ph:()=>I,zc:()=>w,Jg:()=>M});var r=n(41),o=(0,r.createContext)();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var h=n(641),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(p,e);var t,n,d=function(e){var t=l();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(this,n)}}(p);function p(e){var t,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),n=c(t=d.call(this,e)),o=function(e,t,n){var r=new h.Message(n);r.destinationName=t,e.send(r)},(r=f(r="publish"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o;var s=t.props.cfg;return console.log(s),t.client=new h.Client(s.mqtt_server,s.mqtt_port,s.appid+Math.random()),t.client.onConnectionLost=function(e){0!==e.errorCode&&console.log("Connection Lost "+e.errorMessage)},t}return t=p,(n=[{key:"render",value:function(){return r.createElement(o.Provider,{value:[this.client,this.publish]},this.props.children)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(r.Component);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,s,i,a=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e,t,n){e.connect({onSuccess:function(){n(e)},onFailure:function(e){console.log("Connection failed: "+e.errorMessage)},useSSL:!0,userName:t.email,password:t.token})},w=function(e,t,n,r,o){var s=Object.keys(t);!function(e,t,n){function r(e){console.log("subscribe failure",e)}t.map((function(t){n.map((function(n){return e.subscribe("".concat(t,"/").concat(n),{onFailure:r})}))}))}(e,s,r),function(e,t,n,r){t.map((function(t){r.map((function(r,o){return n(e,"".concat(t,"/req"),'{"id":'.concat(o,',"req":"').concat(r,'"}'))}))}))}(e,s,n,r),o(t,e)},E=function(e,t){var n={};return Object.keys(t).map((function(r){t[r].map((function(t){if(t.label==e)return n.dev=r,n.sr=t.sr,n.label=t.label,n}))})),n},O=d,I=function(e,t,n){var r=function(e){var t=e.destinationName.split("/"),n=t[0],r=t[1],o=e.payloadString;return{dev:n,topic:r,payload:JSON.parse(o)}}(e),o=[],s=function(e,t){var n=Object.keys(t).find((function(t){return t===e.dev})),r=[];return"srstate"==e.topic&&(r=t[n].filter((function(t){return t.sr===e.payload.id}))),"timr"==e.topic&&(r=0==e.payload.tIMElEFT.reduce((function(e,t){return e+t}))?t[n]:t[n].filter((function(t){return e.payload.tIMElEFT[t.sr]>0}))),"sched"==e.topic&&(r=t[n].filter((function(t){return t.sr===e.payload.id}))),r}(r,t);return console.log("vvvvvmessge.dev: ",r.dev),s.map((function(e){var t={payload:{}};if("srstate"==r.topic&&e&&e.label&&(t.type=e.label,t.payload.darr=r.payload.darr,0==r.payload.darr[0]&&(t.payload.timeleft=0)),"timr"==r.topic&&e&&e.label&&(t.type=e.label,t.payload.timeleft=r.payload.tIMElEFT[e.sr]),"sched"==r.topic&&e&&e.label&&(t.type=e.label,t.payload.pro=r.payload.pro),"devtime"==r.topic&&(t.type="time",t.payload=r.payload),0!=Object.entries(t.payload).length){var s={};s[t.type]=y({},n[t.type]);var i=function(e,t){return Object.keys(e).reduce((function(n,r){if(t.type==r){var o={};o[r]=y({},n[r]),Object.keys(e[r]).map((function(e){void 0!==t.payload[e]&&(o[r][e]=t.payload[e])})),n[r]=o[r]}return n}),y({},e))}(s,t);o.push(i)}})),"devtime"==r.topic&&(o[0]={jdtime:r.payload}),"jdtime"==r.topic&&(o[0]={jdtime:r.payload}),{nsarr:o,processed_message:r}},M=function(e,t,n,o){var s=e.getItem(),i=m((0,r.useState)({}),2),a=i[0],c=i[1],l=m((0,r.useState)({}),2),u=l[0],f=l[1],h=m((0,r.useState)(void 0),2),d=h[0],p=h[1],g=m((0,r.useState)(void 0),2),y=g[0],v=g[1],_=m((0,r.useState)(void 0),2),b=_[0],w=_[1],E=m((0,r.useState)(!1),2),O=E[0],I=E[1];return(0,r.useEffect)((function(){var e=!1;return e||function(){if(r=s,"lsh.token".split(".").slice(1).reduce((function(e,t){return e&&e[t]?e[t]:null}),r)){var e=t.url.api+"/admin/i/devzones",n={headers:{Authorization:"Bearer "+s.token},method:"GET"};return fetch(e,n).then((function(e){return e.json()}))}var r;return Promise.resolve({qmessage:"you dont exist! "})}().then((function(e){console.log(e),e&&(e&&e.qmessage?w(e):(c(e.zones),Object.keys(e.devs),p(e.devs),f(e.binfo),v(e.specs),o(e.devs,e.zones)))})),function(){e=!0,I(!1),n.isConnected()&&n.disconnect()}}),[]),{devs:d,zones:a,binfo:u,specs:y,error:b,mounted:O}}},641:(e,t,n)=>{var r,o;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}o="object"==("undefined"==typeof self?"undefined":s(self))&&self.self===self&&self||"object"==(void 0===n.g?"undefined":s(n.g))&&n.g.global===n.g&&n.g,void 0===(r=function(){return function(e){var t=1,n=2,r=3,o=4,i=5,a=6,c=7,l=8,u=9,f=10,h=11,d=12,p=13,g=14,y=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var r="Unknown property, "+n+". Valid properties are:";for(var n in t)t.hasOwnProperty(n)&&(r=r+" "+n);throw new Error(r)}if(s(e[n])!==t[n])throw new Error(b(m.INVALID_TYPE,[s(e[n]),n]))}},v=function(e,t){return function(){return e.apply(t,arguments)}},m={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."}},_={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},b=function(e,t){var n=e.text;if(t)for(var r,o,s=0;s<t.length;s++)if(r="{"+s+"}",(o=n.indexOf(r))>0){var i=n.substring(0,o),a=n.substring(o+r.length);n=i+t[s]+a}return n},w=[0,6,77,81,73,115,100,112,3],E=[0,4,77,81,84,84,4],O=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function I(e,t){var s,l=t,f=e[t],d=f>>4,p=f&=15;t+=1;var g=0,y=1;do{if(t==e.length)return[null,l];g+=(127&(s=e[t++]))*y,y*=128}while(128&s);var v=t+g;if(v>e.length)return[null,l];var m=new O(d);switch(d){case n:1&e[t++]&&(m.sessionPresent=!0),m.returnCode=e[t++];break;case r:var _=p>>1&3,b=A(e,t),w=C(e,t+=2,b);t+=b,_>0&&(m.messageIdentifier=A(e,t),t+=2);var E=new j(e.subarray(t,v));1&~p||(E.retained=!0),8&~p||(E.duplicate=!0),E.qos=_,E.destinationName=w,m.payloadMessage=E;break;case o:case i:case a:case c:case h:m.messageIdentifier=A(e,t);break;case u:m.messageIdentifier=A(e,t),t+=2,m.returnCode=e.subarray(t,v)}return[m,v]}function M(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function S(e,t,n,r){return N(e,n,r=M(t,n,r)),r+t}function A(e,t){return 256*e[t]+e[t+1]}function T(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function N(e,t,n){for(var r=n,o=0;o<e.length;o++){var s=e.charCodeAt(o);if(55296<=s&&s<=56319){var i=e.charCodeAt(++o);if(isNaN(i))throw new Error(b(m.MALFORMED_UNICODE,[s,i]));s=i-56320+(s-55296<<10)+65536}s<=127?t[r++]=s:s<=2047?(t[r++]=s>>6&31|192,t[r++]=63&s|128):s<=65535?(t[r++]=s>>12&15|224,t[r++]=s>>6&63|128,t[r++]=63&s|128):(t[r++]=s>>18&7|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=63&s|128)}return t}function C(e,t,n){for(var r,o="",s=t;s<t+n;){var i=e[s++];if(i<128)r=i;else{var a=e[s++]-128;if(a<0)throw new Error(b(m.MALFORMED_UTF,[i.toString(16),a.toString(16),""]));if(i<224)r=64*(i-192)+a;else{var c=e[s++]-128;if(c<0)throw new Error(b(m.MALFORMED_UTF,[i.toString(16),a.toString(16),c.toString(16)]));if(i<240)r=4096*(i-224)+64*a+c;else{var l=e[s++]-128;if(l<0)throw new Error(b(m.MALFORMED_UTF,[i.toString(16),a.toString(16),c.toString(16),l.toString(16)]));if(!(i<248))throw new Error(b(m.MALFORMED_UTF,[i.toString(16),a.toString(16),c.toString(16),l.toString(16)]));r=262144*(i-240)+4096*a+64*c+l}}}r>65535&&(r-=65536,o+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),o+=String.fromCharCode(r)}return o}O.prototype.encode=function(){var e=(15&this.type)<<4,n=0,o=new Array,s=0;switch(null!=this.messageIdentifier&&(n+=2),this.type){case t:switch(this.mqttVersion){case 3:n+=w.length+3;break;case 4:n+=E.length+3}if(n+=T(this.clientId)+2,null!=this.willMessage){n+=T(this.willMessage.destinationName)+2;var i=this.willMessage.payloadBytes;i instanceof Uint8Array||(i=new Uint8Array(u)),n+=i.byteLength+2}null!=this.userName&&(n+=T(this.userName)+2),null!=this.password&&(n+=T(this.password)+2);break;case l:e|=2;for(var c=0;c<this.topics.length;c++)o[c]=T(this.topics[c]),n+=o[c]+2;n+=this.requestedQos.length;break;case f:for(e|=2,c=0;c<this.topics.length;c++)o[c]=T(this.topics[c]),n+=o[c]+2;break;case a:e|=2;break;case r:this.payloadMessage.duplicate&&(e|=8),e=e|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(e|=1),n+=(s=T(this.payloadMessage.destinationName))+2;var u=this.payloadMessage.payloadBytes;n+=u.byteLength,u instanceof ArrayBuffer?u=new Uint8Array(u):u instanceof Uint8Array||(u=new Uint8Array(u.buffer))}var h=function(e){var t=new Array(1),n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(n),d=h.length+1,p=new ArrayBuffer(n+d),g=new Uint8Array(p);if(g[0]=e,g.set(h,1),this.type==r)d=S(this.payloadMessage.destinationName,s,g,d);else if(this.type==t){switch(this.mqttVersion){case 3:g.set(w,d),d+=w.length;break;case 4:g.set(E,d),d+=E.length}var y=0;this.cleanSession&&(y=2),null!=this.willMessage&&(y|=4,y|=this.willMessage.qos<<3,this.willMessage.retained&&(y|=32)),null!=this.userName&&(y|=128),null!=this.password&&(y|=64),g[d++]=y,d=M(this.keepAliveInterval,g,d)}switch(null!=this.messageIdentifier&&(d=M(this.messageIdentifier,g,d)),this.type){case t:d=S(this.clientId,T(this.clientId),g,d),null!=this.willMessage&&(d=S(this.willMessage.destinationName,T(this.willMessage.destinationName),g,d),d=M(i.byteLength,g,d),g.set(i,d),d+=i.byteLength),null!=this.userName&&(d=S(this.userName,T(this.userName),g,d)),null!=this.password&&(d=S(this.password,T(this.password),g,d));break;case r:g.set(u,d);break;case l:for(c=0;c<this.topics.length;c++)d=S(this.topics[c],o[c],g,d),g[d++]=this.requestedQos[c];break;case f:for(c=0;c<this.topics.length;c++)d=S(this.topics[c],o[c],g,d)}return p};var P=function(e,t,n){this._client=e,this._window=t,this._keepAliveInterval=1e3*n,this.isReset=!1;var r=new O(d).encode(),o=function(e){return function(){return s.apply(e)}},s=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(r),this.timeout=this._window.setTimeout(o(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(m.PING_TIMEOUT.code,b(m.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(o(this),this._keepAliveInterval))},this.cancel=function(){this._window.clearTimeout(this.timeout)}},k=function(e,t,n,r,o){this._window=t,n||(n=30);this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(r,e,o),1e3*n),this.cancel=function(){this._window.clearTimeout(this.timeout)}},R=function(t,n,r,o,s){if(!("WebSocket"in e)||null===e.WebSocket)throw new Error(b(m.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in e)||null===e.localStorage)throw new Error(b(m.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in e)||null===e.ArrayBuffer)throw new Error(b(m.UNSUPPORTED,["ArrayBuffer"]));for(var i in this._trace("Paho.MQTT.Client",t,n,r,o,s),this.host=n,this.port=r,this.path=o,this.uri=t,this.clientId=s,this._localKey=n+":"+r+("/mqtt"!=o?":"+o:"")+":"+s+":",this._msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,localStorage)0!=i.indexOf("Sent:"+this._localKey)&&0!=i.indexOf("Received:"+this._localKey)||this.restore(i)};R.prototype.host,R.prototype.port,R.prototype.path,R.prototype.uri,R.prototype.clientId,R.prototype.socket,R.prototype.connected=!1,R.prototype.maxMessageIdentifier=65536,R.prototype.connectOptions,R.prototype.hostIndex,R.prototype.onConnectionLost,R.prototype.onMessageDelivered,R.prototype.onMessageArrived,R.prototype.traceFunction,R.prototype._msg_queue=null,R.prototype._connectTimeout,R.prototype.sendPinger=null,R.prototype.receivePinger=null,R.prototype.receiveBuffer=null,R.prototype._traceBuffer=null,R.prototype._MAX_TRACE_ENTRIES=100,R.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(b(m.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(b(m.INVALID_STATE,["already connected"]));this.connectOptions=e,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},R.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(b(m.INVALID_STATE,["not connected"]));var n=new O(l);n.topics=[e],null!=t.qos?n.requestedQos=[t.qos]:n.requestedQos=[0],t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e})}),t.timeout&&(n.timeOut=new k(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:m.SUBSCRIBE_TIMEOUT.code,errorMessage:b(m.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},R.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(b(m.INVALID_STATE,["not connected"]));var n=new O(f);n.topics=[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new k(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:m.UNSUBSCRIBE_TIMEOUT.code,errorMessage:b(m.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},R.prototype.send=function(e){if(this._trace("Client.send",e),!this.connected)throw new Error(b(m.INVALID_STATE,["not connected"]));wireMessage=new O(r),wireMessage.payloadMessage=e,e.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage)},R.prototype.disconnect=function(){if(this._trace("Client.disconnect"),!this.socket)throw new Error(b(m.INVALID_STATE,["not connecting or connected"]));wireMessage=new O(g),this._notify_msg_sent[wireMessage]=v(this._disconnected,this),this._schedule_message(wireMessage)},R.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},R.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@")},R.prototype.stopTrace=function(){delete this._traceBuffer},R.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=v(this._on_socket_open,this),this.socket.onmessage=v(this._on_socket_message,this),this.socket.onerror=v(this._on_socket_error,this),this.socket.onclose=v(this._on_socket_close,this),this.sendPinger=new P(this,window,this.connectOptions.keepAliveInterval),this.receivePinger=new P(this,window,this.connectOptions.keepAliveInterval),this._connectTimeout=new k(this,window,this.connectOptions.timeout,this._disconnected,[m.CONNECT_TIMEOUT.code,b(m.CONNECT_TIMEOUT)])},R.prototype._schedule_message=function(e){this._msg_queue.push(e),this.connected&&this._process_queue()},R.prototype.store=function(e,t){var n={type:t.type,messageIdentifier:t.messageIdentifier,version:1};if(t.type!==r)throw Error(b(m.INVALID_STORED_DATA,[key,n]));t.pubRecReceived&&(n.pubRecReceived=!0),n.payloadMessage={};for(var o="",s=t.payloadMessage.payloadBytes,i=0;i<s.length;i++)s[i]<=15?o=o+"0"+s[i].toString(16):o+=s[i].toString(16);n.payloadMessage.payloadHex=o,n.payloadMessage.qos=t.payloadMessage.qos,n.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(n.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(n.payloadMessage.retained=!0),0==e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),n.sequence=t.sequence),localStorage.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(n))},R.prototype.restore=function(e){var t=localStorage.getItem(e),n=JSON.parse(t),o=new O(n.type,n);if(n.type!==r)throw Error(b(m.INVALID_STORED_DATA,[e,t]));for(var s=n.payloadMessage.payloadHex,i=new ArrayBuffer(s.length/2),a=new Uint8Array(i),c=0;s.length>=2;){var l=parseInt(s.substring(0,2),16);s=s.substring(2,s.length),a[c++]=l}var u=new j(a);u.qos=n.payloadMessage.qos,u.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(u.duplicate=!0),n.payloadMessage.retained&&(u.retained=!0),o.payloadMessage=u,0==e.indexOf("Sent:"+this._localKey)?(o.payloadMessage.duplicate=!0,this._sentMessages[o.messageIdentifier]=o):0==e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[o.messageIdentifier]=o)},R.prototype._process_queue=function(){for(var e=null,t=this._msg_queue.reverse();e=t.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},R.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===r&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},R.prototype._on_socket_open=function(){var e=new O(t,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},R.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data),this.receivePinger.reset();for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},R.prototype._deframeMessages=function(e){var t=new Uint8Array(e);if(this.receiveBuffer){var n=new Uint8Array(this.receiveBuffer.length+t.length);n.set(this.receiveBuffer),n.set(t,this.receiveBuffer.length),t=n,delete this.receiveBuffer}try{for(var r=0,o=[];r<t.length;){var s=I(t,r),i=s[0];if(r=s[1],null===i)break;o.push(i)}r<t.length&&(this.receiveBuffer=t.subarray(r))}catch(e){return void this._disconnected(m.INTERNAL_ERROR.code,b(m.INTERNAL_ERROR,[e.message,e.stack.toString()]))}return o},R.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case n:if(this._connectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var s=this._sentMessages[t];localStorage.removeItem("Sent:"+this._localKey+s.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var l=this._receivedMessages[t];localStorage.removeItem("Received:"+this._localKey+l.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(m.CONNACK_RETURNCODE.code,b(m.CONNACK_RETURNCODE,[e.returnCode,_[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var f=new Array;for(var d in this._sentMessages)this._sentMessages.hasOwnProperty(d)&&f.push(this._sentMessages[d]);f=f.sort((function(e,t){return e.sequence-t.sequence}));for(var g=0,y=f.length;g<y;g++)if((s=f[g]).type==r&&s.pubRecReceived){var v=new O(a,{messageIdentifier:s.messageIdentifier});this._schedule_message(v)}else this._schedule_message(s);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext}),this._process_queue();break;case r:this._receivePublish(e);break;case o:(s=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(s.payloadMessage));break;case i:(s=this._sentMessages[e.messageIdentifier])&&(s.pubRecReceived=!0,v=new O(a,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",s),this._schedule_message(v));break;case a:l=this._receivedMessages[e.messageIdentifier],localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier),l&&(this._receiveMessage(l),delete this._receivedMessages[e.messageIdentifier]);var w=new O(c,{messageIdentifier:e.messageIdentifier});this._schedule_message(w);break;case c:s=this._sentMessages[e.messageIdentifier],delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(s.payloadMessage);break;case u:(s=this._sentMessages[e.messageIdentifier])&&(s.timeOut&&s.timeOut.cancel(),e.returnCode.indexOf=Array.prototype.indexOf,-1!==e.returnCode.indexOf(128)?s.onFailure&&s.onFailure(e.returnCode):s.onSuccess&&s.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case h:(s=this._sentMessages[e.messageIdentifier])&&(s.timeOut&&s.timeOut.cancel(),s.callback&&s.callback(),delete this._sentMessages[e.messageIdentifier]);break;case p:this.sendPinger.reset();break;default:this._disconnected(m.INVALID_MQTT_MESSAGE_TYPE.code,b(m.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){return void this._disconnected(m.INTERNAL_ERROR.code,b(m.INTERNAL_ERROR,[e.message,e.stack.toString()]))}},R.prototype._on_socket_error=function(e){this._disconnected(m.SOCKET_ERROR.code,b(m.SOCKET_ERROR,[e.data]))},R.prototype._on_socket_close=function(){this._disconnected(m.SOCKET_CLOSE.code,b(m.SOCKET_CLOSE))},R.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},R.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new O(o,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new O(i,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}},R.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},R.prototype._disconnected=function(e,t){this._trace("Client._disconnected",e,t),this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&this._connectTimeout.cancel(),this._msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1?(this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex])):(void 0===e&&(e=m.OK.code,t=b(m.OK)),this.connected?(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t})):4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t}))},R.prototype._trace=function(){if(this.traceFunction){for(var e in arguments)void 0!==arguments[e]&&(arguments[e]=JSON.stringify(arguments[e]));var t=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:t})}if(null!==this._traceBuffer){e=0;for(var n=arguments.length;e<n;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e||void 0===arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+JSON.stringify(arguments[e]))}},R.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=r==t?"******":e[r]);return n};var D=function(e,t,n,r){var o;if("string"!=typeof e)throw new Error(b(m.INVALID_TYPE,[s(e),"host"]));if(2==arguments.length){r=t;var i=(o=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!i)throw new Error(b(m.INVALID_ARGUMENT,[e,"host"]));e=i[4]||i[2],t=parseInt(i[7]),n=i[8]}else{if(3==arguments.length&&(r=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(b(m.INVALID_TYPE,[s(t),"port"]));if("string"!=typeof n)throw new Error(b(m.INVALID_TYPE,[s(n),"path"]));var a=-1!=e.indexOf(":")&&"["!=e.slice(0,1)&&"]"!=e.slice(-1);o="ws://"+(a?"["+e+"]":e)+":"+t+n}for(var c=0,l=0;l<r.length;l++){var u=r.charCodeAt(l);55296<=u&&u<=56319&&l++,c++}if("string"!=typeof r||c>65535)throw new Error(b(m.INVALID_ARGUMENT,[r,"clientId"]));var f=new R(o,e,t,n,r);this._getHost=function(){return e},this._setHost=function(){throw new Error(b(m.UNSUPPORTED_OPERATION))},this._getPort=function(){return t},this._setPort=function(){throw new Error(b(m.UNSUPPORTED_OPERATION))},this._getPath=function(){return n},this._setPath=function(){throw new Error(b(m.UNSUPPORTED_OPERATION))},this._getURI=function(){return o},this._setURI=function(){throw new Error(b(m.UNSUPPORTED_OPERATION))},this._getClientId=function(){return f.clientId},this._setClientId=function(){throw new Error(b(m.UNSUPPORTED_OPERATION))},this._getOnConnectionLost=function(){return f.onConnectionLost},this._setOnConnectionLost=function(e){if("function"!=typeof e)throw new Error(b(m.INVALID_TYPE,[s(e),"onConnectionLost"]));f.onConnectionLost=e},this._getOnMessageDelivered=function(){return f.onMessageDelivered},this._setOnMessageDelivered=function(e){if("function"!=typeof e)throw new Error(b(m.INVALID_TYPE,[s(e),"onMessageDelivered"]));f.onMessageDelivered=e},this._getOnMessageArrived=function(){return f.onMessageArrived},this._setOnMessageArrived=function(e){if("function"!=typeof e)throw new Error(b(m.INVALID_TYPE,[s(e),"onMessageArrived"]));f.onMessageArrived=e},this._getTrace=function(){return f.traceFunction},this._setTrace=function(e){if("function"!=typeof e)throw new Error(b(m.INVALID_TYPE,[s(e),"onTrace"]));f.traceFunction=e},this.connect=function(e){if(y(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",mqttVersion:"number"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(b(m.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0===e.password&&void 0!==e.userName)throw new Error(b(m.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof j))throw new Error(b(m.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload,void 0===e.willMessage.destinationName)throw new Error(b(m.INVALID_TYPE,[s(e.willMessage.destinationName),"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(b(m.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(b(m.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,r=0;r<e.hosts.length;r++){if("string"!=typeof e.hosts[r])throw new Error(b(m.INVALID_TYPE,[s(e.hosts[r]),"connectOptions.hosts["+r+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[r])){if(0==r)t=!0;else if(!t)throw new Error(b(m.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}else if(t)throw new Error(b(m.INVALID_ARGUMENT,[e.hosts[r],"connectOptions.hosts["+r+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(b(m.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(b(m.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!=e.ports.length)throw new Error(b(m.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],r=0;r<e.hosts.length;r++){if("number"!=typeof e.ports[r]||e.ports[r]<0)throw new Error(b(m.INVALID_TYPE,[s(e.ports[r]),"connectOptions.ports["+r+"]"]));var i=e.hosts[r],a=e.ports[r],c=-1!=i.indexOf(":");o="ws://"+(c?"["+i+"]":i)+":"+a+n,e.uris.push(o)}}}f.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(y(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(b(m.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));f.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(y(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");f.unsubscribe(e,t)},this.send=function(e,t,n,r){var o;if(0==arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof j)&&"string"!=typeof e)throw new Error("Invalid argument:"+s(e));if(void 0===(o=e).destinationName)throw new Error(b(m.INVALID_ARGUMENT,[o.destinationName,"Message.destinationName"]));f.send(o)}else(o=new j(t)).destinationName=e,arguments.length>=3&&(o.qos=n),arguments.length>=4&&(o.retained=r),f.send(o)},this.disconnect=function(){f.disconnect()},this.getTraceLog=function(){return f.getTraceLog()},this.startTrace=function(){f.startTrace()},this.stopTrace=function(){f.stopTrace()},this.isConnected=function(){return f.connected}};D.prototype={get host(){return this._getHost()},set host(e){this._setHost(e)},get port(){return this._getPort()},set port(e){this._setPort(e)},get path(){return this._getPath()},set path(e){this._setPath(e)},get clientId(){return this._getClientId()},set clientId(e){this._setClientId(e)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(e){this._setOnConnectionLost(e)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(e){this._setOnMessageDelivered(e)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(e){this._setOnMessageArrived(e)},get trace(){return this._getTrace()},set trace(e){this._setTrace(e)}};var j=function(e){var t;if(!("string"==typeof e||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))throw b(m.INVALID_ARGUMENT,[e,"newPayload"]);t=e,this._getPayloadString=function(){return"string"==typeof t?t:C(t,0,t.length)},this._getPayloadBytes=function(){if("string"==typeof t){var e=new ArrayBuffer(T(t)),n=new Uint8Array(e);return N(t,n,0),n}return t};var n=void 0;this._getDestinationName=function(){return n},this._setDestinationName=function(e){if("string"!=typeof e)throw new Error(b(m.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e};var r=0;this._getQos=function(){return r},this._setQos=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e};var o=!1;this._getRetained=function(){return o},this._setRetained=function(e){if("boolean"!=typeof e)throw new Error(b(m.INVALID_ARGUMENT,[e,"newRetained"]));o=e};var s=!1;this._getDuplicate=function(){return s},this._setDuplicate=function(e){s=e}};return j.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(e){this._setDestinationName(e)},get qos(){return this._getQos()},set qos(e){this._setQos(e)},get retained(){return this._getRetained()},set retained(e){this._setRetained(e)},get duplicate(){return this._getDuplicate()},set duplicate(e){this._setDuplicate(e)}},{Client:D,Message:j}}(o)}.apply(t,[]))||(e.exports=r)},664:(e,t,n)=>{"use strict";n.d(t,{Hd:()=>s,TK:()=>i,l6:()=>o,ue:()=>r});var r={zone1:{ctype:"relay",darr:[0,22,1,-1,-1],timeleft:0},zone2:{ctype:"relay",darr:[0,22,2,0,0],timeleft:0},zone3:{ctype:"relay",darr:[0,22,3,1,0],timeleft:0},zone4:{ctype:"relay",darr:[0,22,-1,2,0],timeleft:0},temp_out:{darr:[0]}},o={difctrl:{lab:["onoff","rdA","rdB","dif","difgt0"],cmd:[3],prg:[3]},tstat:{lab:["onoff","reading","setting","dif"],cmd:[0,2,3],prg:[3]},relay:{lab:["onoff","tsec","nxtsr","priosr","prionoff"],cmd:[0,1],prg:[1]},ctrl:{lab:["bell","reading","setting"],cmd:[2],prg:[2]},array:{lab:["a0","a1","a2","a3","a4","a5","a6","a7"],cmd:[],prg:[]},se:{lab:["reading"],cmd:[],prg:[]},cs:{lab:["onoff","reading","hi","lo"],cmd:[0,2,3],prg:[2,3]},re:{lab:["onoff"],cmd:[0],prg:[0]}},s="edgewater",i="CYURD127"}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return s[e](n,n.exports,a),n.exports}a.m=s,e=[],a.O=(t,n,r,o)=>{if(!n){var s=1/0;for(u=0;u<e.length;u++){for(var[n,r,o]=e[u],i=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(i=!1,o<s&&(s=o));if(i){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var s={};t=t||[null,n({}),n([]),n(n)];for(var i=2&r&&e;"object"==typeof i&&!~t.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,a.d(o,s),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+"."+a.h()+".js",a.h=()=>"88d4b5016579a7c863ae",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},o="edgewater:",a.l=(e,t,n,s)=>{if(r[e])r[e].push(t);else{var i,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var f=l[u];if(f.getAttribute("src")==e||f.getAttribute("data-webpack")==o+n){i=f;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",o+n),i.src=e),r[e]=[t];var h=(t,n)=>{i.onerror=i.onload=null,clearTimeout(d);var o=r[e];if(delete r[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((e=>e(n))),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),c&&document.head.appendChild(i)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={792:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var s=a.p+a.u(t),i=new Error;a.l(s,(n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,r[1](i)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[s,i,c]=n,l=0;if(s.some((t=>0!==e[t]))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(c)var u=c(a)}for(t&&t(n);l<s.length;l++)o=s[l],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=self.webpackChunkedgewater=self.webpackChunkedgewater||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c=a.O(void 0,[121],(()=>a(279)));c=a.O(c)})();