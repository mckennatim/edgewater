"use strict";(self.webpackChunkedgewater=self.webpackChunkedgewater||[]).push([[143],{143:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(41),o=n(261),l=n(321),a=n(434),c=n(606),i=n(664);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l,a,c=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=a.ls.getItem();function m(){var e=p((0,r.useState)(!1),2),t=e[0],n=e[1],u=p((0,r.useState)("blur-disconnected"),2),y=(u[0],u[1],p((0,r.useContext)(c.ob),2)),m=y[0],g=y[1];m.onMessageArrived=function(e){var r=(0,c.Ph)(e,S,E),o=r.nsarr,l=r.processed_message;console.log("nsarr: ",o),console.log("processed_message: ",l);var a=l.dev;a==i.TK&&n(!0),console.log("dev: ",a,"dev1: ",i.TK,"connected: ",t),o.length>0&&o.map((function(e){var t=Object.keys(e)[0],n={type:t,payload:e[t]};console.log("action: ",n.payload),w(n)}))};var b=(0,r.useReducer)((function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return n[t.type]=t.payload,n}),i.ue),h=p(b,2),E=h[0],w=h[1],O=function(e,t,n){g(n,"presence","hello form do other shit"),console.log("devs: ",e);var r="".concat(Object.keys(e)[0],"/req");console.log("topic, payload: ",r,'{"id":2, "req":"flags"}')},j=["srstate","sched","flags","timr"],k=(0,c.Jg)(a.ls,a.jh,m,(function(e,t){m.isConnected()?(0,c.zc)(m,e,g,j,(function(e,t){return O(e,0,t)})):(0,c.Ng)(m,d,(function(t){t.isConnected()&&(0,c.zc)(t,e,g,j,(function(e,t){return O(e,0,t)}))}))})),S=k.devs,C=(k.zones,k.binfo),P=k.error,A=function(){var e=(0,a.q5)(window.location.hostname,"signin","");console.log("href: ",e),window.location.assign(e)},D=function(e){return function(t){if("Enter"===t.key){var n=1*t.target.value,r=(0,c.lC)(e,S);console.log("di: ",r);var o="".concat(r.dev,"/cmd"),l='{"id":'.concat(r.sr,',"sra":[],"tsec":').concat(n,"}");console.log("topic,payload: ",o,l),g(m,o,l)}}},x=function(e){return function(t){if("Enter"===t.key){var n=t.target.value;console.log("key, event.target: ",e,t.target.value);var r=(0,c.lC)(e,S),o="".concat(r.dev,"/prg"),l='{"id":'.concat(r.sr,',"pro":[').concat(n,"]}");console.log("topic,payload: ",o,l),g(m,o,l)}}},q=function(e){return function(t){if("Enter"===t.key||"Q"===t.key||"q"==t.key){var n=t.target.value.split(",").map((function(e){return 1*e}));console.log("arr: ",n),w({type:e,payload:{ctype:"relay",darr:n,timeleft:0}}),console.log("key, event.target: ",e,t.target.value);var r=(0,c.lC)(e,S),o="".concat(r.dev,"/cmd"),l='{"id":'.concat(r.sr,',"sra":[').concat(n,"]}");console.log("topic,payload: ",o,l),g(m,o,l)}}},z=function(e){if("Enter"===e.key){var t=e.target.value;console.log("event.target: ",e.target.value);var n="CYURD127/cmd";console.log("topic,payload: ",n,t),g(m,n,t)}};return r.createElement("div",{style:v.ctrl.div0},function(){if(P)return r.createElement("div",null,r.createElement("p",null,"From this app on this machine's perspective, ",P.qmessage," It is probably best to",r.createElement("button",{onClick:A},"go and (re-)signin"),". But maybe nobody has registered you to a paticular location that has some iot devices that run this app. then this is as far as you can go. You can see some screenshots of the app below."));var e=C.locdata;return r.createElement("div",null,r.createElement("header",{style:v.header},r.createElement("div",{style:v.container},r.createElement("div",{style:v.ul},r.createElement("div",null,r.createElement("a",{style:v.a,href:"./"}),e&&e.loc," ")),t?r.createElement("div",{style:v.ur},r.createElement(o.A,null)):r.createElement("div",{style:v.ur},r.createElement(l.A,null)),r.createElement("div",{style:v.ll},r.createElement("div",{style:v.txt},r.createElement("span",{style:v.otxt},"outside: "),E.temp_out.darr[0]," Â°F")))))}(),r.createElement("h4",null,"Control"),function(){if(P)return r.createElement("div",null,r.createElement("p",null,P.qmessage));var e=Object.keys(E).map((function(e,t){if(S){var n=(0,c.lC)(e,S),o=E[e].ctype,l=E[e].darr?E[e].darr.length:0,a="[";if(o){var u=i.l6[o].cmd.length;i.l6[o].cmd.map((function(t,n){a+="".concat(E[e].darr[t]).concat(n+1==u?"":","," ")}))}return a+="]",r.createElement("li",{key:t},r.createElement("span",null,r.createElement("span",null,n.dev," ",n.sr," ",e," ",o," ",a),function(){if(o&&l>0)return r.createElement("span",null,r.createElement("input",{size:"2",type:"text",onKeyDown:q(e)}))}(),E[e].pro&&r.createElement("span",null," pro: ",JSON.stringify(E[e].pro)," [",r.createElement("input",{size:"20",type:"text",onKeyDown:x(e)})," ]"),E[e].timeleft>=0&&r.createElement("span",null," timeleft:  ",JSON.stringify(E[e].timeleft),r.createElement("input",{size:"1",type:"text",onKeyDown:D(e)}))))}}));return r.createElement("div",null,r.createElement("ul",null,e),"[0,0,1],[21,55,0] [0,0,69,67],[13,13,72,70]",r.createElement("p",null,'{"id":3, "sra":[1, 240]}'),r.createElement("br",null),r.createElement("input",{size:"80",type:"text",onKeyDown:z}),r.createElement("p",null,"Simple page to operate as an mqtt ws client that can send and recieve payloads to a test device"))}())}console.log("in control ",d);var v={ctrl:{div0:{backgroundColor:"#e5bf37"}}}}}]);